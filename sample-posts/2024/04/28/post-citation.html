<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> LLMs as Planners? | Rishi Hazra </title> <meta name="author" content="Rishi Hazra"> <meta name="description" content=""> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://rishihazra.github.io/sample-posts/2024/04/28/post-citation.html"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Rishi</span> Hazra </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">LLMs as Planners?</h1> <p class="post-meta"> Created in April 28, 2024 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2024   ·   <i class="fa-solid fa-hashtag fa-sm"></i> formatting   <i class="fa-solid fa-hashtag fa-sm"></i> citation     ·   <i class="fa-solid fa-tag fa-sm"></i> sample-posts   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>In this blog post, we will address the following question:</p> <h3 id="1-why">1. Why?</h3> <h3 id="2-are-they-really-all-you-need-for-planning">2. Are they really All You Need (for Planning)?</h3> <p>Let’s start with 1.</p> <h3 id="open-world-planning">Open-world Planning</h3> <div class="row"> <div class="col-sm-12 mt-3 mt-md-0"> <img src="/assets/img/open-world-planning-1.png" width="70%" alt="Description of the image content" class="img-fluid rounded z-depth-1" style="display: block; margin: auto;" onerror="this.onerror=null; this.src='image-not-found.png';"> </div> </div> <p>We will mainly compare LLM Planning with Classical Planning approaches. Classical Planning approaches generally require a predefined <a href="https://planning.wiki/ref/pddl/domain" rel="external nofollow noopener" target="_blank">domain file, for e.g. defined in Planning Domain Definition Language (PDDL))</a>. That is not the case with LLMs. Owing to its internet-scale training, LLMs acquire vast world knowledge that can be utilized to plan in the world. Here’s an example where the robot needs to deliver a cup for drinking, however the cup is already occupied by tableware. Let’s assume the robot lacks to ability to empty the cup, can it adapt its plan to accommodate another object that is NOT a cup or glass. As humans, we know that a bowl can also be utilized since it has similar <em>affordances</em>, however the knowledge of the classical planner is restricted to the confines of the PDDL domain file – hence, <em>closed-world</em>. However, an LLM can utilize its world knowledge for open-world planning <a href="#1">[1]</a>.</p> <div class="row"> <div class="col-sm-12 mt-3 mt-md-0"> <img src="/assets/img/open-world-planning-2.png" width="70%" alt="Description of the image content" class="img-fluid rounded z-depth-1" style="display: block; margin: auto;" onerror="this.onerror=null; this.src='image-not-found.png';"> </div> </div> <p>Yet another example is Voyager <a href="#2">[2]</a>, a lifelong learning agent in Minecraft, which by designing its own <em>curriculum</em>, builds a skill library and constantly expands it by interacting with the Minecraft environment. Each skill is defined in form of executable code blocks and more complex skills are build by composing simpler skills. For e.g., to <code class="language-plaintext highlighter-rouge">combatZombie</code>, the agent needs to <code class="language-plaintext highlighter-rouge">craftStoneSword</code> and <code class="language-plaintext highlighter-rouge">craftShield</code>, which in turn requires skills like <code class="language-plaintext highlighter-rouge">mineWood</code> and <code class="language-plaintext highlighter-rouge">makeFurnace</code> No rewards for guessing that the world knowledge of the LLMs come in handy. The methods leads to quite advance and complex minecraft behaviour. To preemtively define all skills (including unexpected scenarios) in a classical planner requires expert knowledge of the domain and also the environment.</p> <h3 id="handling-abstract-tasks">Handling Abstract Tasks</h3> <table> <tbody> <tr> <td align="center" valign="top" width="25%"> <video width="100%" controls=""> <source src="/assets/videos/organize_closet.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> <br><sub><b>Organize Closet</b></sub> </td> <td align="center" valign="top" width="25%"> <video width="100%" controls=""> <source src="/assets/videos/browse_internet.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> <br><sub><b>Browse Internet</b></sub> </td> <td align="center" valign="top" width="25%"> <video width="100%" controls=""> <source src="/assets/videos/turn_off_tv.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> <br><sub><b>Turn off TV</b></sub> </td> </tr> </tbody> </table> <p>As shown in the videos, LLMs can – in zero-shot –generate plans for any abstractly defined tasks<a href="#3">[3]</a>. In contrast, classical planning requires an expert to formally define goal conditions in a <a href="https://planning.wiki/ref/pddl/problem" rel="external nofollow noopener" target="_blank">PDDL problem file</a>.</p> <h3 id="handling-partial-observability">Handling Partial Observability</h3> <div class="row"> <div class="col-sm-12 mt-3 mt-md-0"> <img src="/assets/img/partial-observability.png" width="70%" alt="Description of the image content" class="img-fluid rounded z-depth-1" style="display: block; margin: auto;" onerror="this.onerror=null; this.src='image-not-found.png';"> </div> </div> <p>Classical planners generally work under the assumption of <em>full observability</em> modeled via a Markov Decision Process (MDP). Unfortunately, in the real-world, the agent’s senors provide only partial information, called <em>observation</em>. Such problems are modeled as a Partially Observable MDP (POMDP). At each time step, the sequence of observations made by the agent determines a probability distribution over states of the environment. Such a distribution is called a <em>belief state</em>. Needless to say that often leads to intractibility problems as the length of the plan grows. LLMs can use its world knowledge to get handle partial observability. Think of it as a commonsense prior that helps to better (posterior) belief state. For instance, given the task <code class="language-plaintext highlighter-rouge">make an omlette</code>, the LLM can output actions to <code class="language-plaintext highlighter-rouge">go to the fridge</code> since eggs are likely to be found in the fridge – even though eggs are not visible (i.e. partial observation) <a href="#4">[4]</a>.</p> <div class="row"> <div class="col-sm-12 mt-3 mt-md-0"> <img src="/assets/img/partial-observability-2.png" width="70%" alt="Description of the image content" class="img-fluid rounded z-depth-1" style="display: block; margin: auto;" onerror="this.onerror=null; this.src='image-not-found.png';"> </div> </div> <p>Yet another example is where the agent is given the task of <code class="language-plaintext highlighter-rouge">stacking the lighter block on the heavier block</code><a href="#5">[5]</a>. Without the information of weights, a planner will never work. However, a LLM uses <em>active perception</em> to first pick up each block to register the weights, then perform the task.</p> <h3 id="what-we-know-so-far">What we know so far?</h3> <table> <thead> <tr> <th style="text-align: left"> </th> <th style="text-align: center">Classical Planning</th> <th style="text-align: center">LLM Planning</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><strong>Open-world Planning</strong></td> <td style="text-align: center">❌</td> <td style="text-align: center">✅</td> </tr> <tr> <td style="text-align: left"><strong>Handling Abstract Tasks</strong></td> <td style="text-align: center">❌</td> <td style="text-align: center">✅</td> </tr> <tr> <td style="text-align: left"><strong>Handling Partial Observability</strong></td> <td style="text-align: center">❌</td> <td style="text-align: center">✅</td> </tr> </tbody> </table> <p>Note that these aspects are not outlier – on the contrary – these are pretty much the norm in the real-world. Now that I have managed to convince you that LLMs are required for real-world planning, what next? An LLM is All You Need for Planning. Period. Is it though? Let’s not get ahead of ourselves ;)</p> <div class="row"> <div class="col-sm-12 mt-3 mt-md-0"> <img src="/assets/img/well-well.png" width="50%" alt="Description of the image content" class="img-fluid rounded z-depth-1" style="display: block; margin: auto;" onerror="this.onerror=null; this.src='image-not-found.png';"> </div> </div> <h3 id="llms-seem-to-struggle-a-bit-6">LLMs seem to struggle a bit <a href="#6">[6]</a>.</h3> <div class="row"> <div class="col-sm-12 col-md-6 offset-md-3 mt-3 mt-md-0"> <video class="img-fluid rounded z-depth-1" controls="" style="display: block; margin-left: auto; margin-right: auto;"> <source src="/assets/videos/say_final_hanoi.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> </div> <h3 id="in-fact-it-struggles-a-lot-6">In fact, it struggles a lot <a href="#6">[6]</a>.</h3> <div class="row"> <div class="col-sm-12 col-md-6 offset-md-3 mt-3 mt-md-0"> <video class="img-fluid rounded z-depth-1" controls="" style="display: block; margin-left: auto; margin-right: auto;"> <source src="/assets/videos/say_final_virtualhome.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> </div> <h3 id="even-on-simple-blocksworld-7">Even on simple Blocksworld <a href="#7">[7]</a>.</h3> <div class="row"> <div class="col-sm-12 mt-3 mt-md-0"> <img src="/assets/img/blocksworld.png" width="50%" alt="Description of the image content" class="img-fluid rounded z-depth-1" style="display: block; margin: auto;" onerror="this.onerror=null; this.src='image-not-found.png';"> </div> </div> <div class="jekyll-twitter-plugin"> <blockquote class="twitter-tweet"> <p lang="en" dir="ltr">Forget Super Bowl, it is more fun to watch the all powerful ChatGPT (v. Jan 30) trying to "plan" a 3 blocks configuration.. <br><br>tldr; LLM's are multi-shot "apologetic" planners that would rather use you as their world model cum debugger.. <a href="https://t.co/eYIeEVBJli" rel="external nofollow noopener" target="_blank">pic.twitter.com/eYIeEVBJli</a></p>— Subbarao Kambhampati (కంభంపాటి సుబ్బారావు) (@rao2z) <a href="https://twitter.com/rao2z/status/1624881790212251649?ref_src=twsrc%5Etfw" rel="external nofollow noopener" target="_blank">February 12, 2023</a> </blockquote> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> </div> <h3 id="and-neither-prompting-nor-finetuning-helps-8">And neither Prompting, nor Finetuning helps <a href="#8">[8]</a>.</h3> <ul> <li>50 human planners</li> <li>39 (78%) came up with valid plan</li> <li>35 (70%) came up with optimal plan</li> <li> <u>Finetuned-GPT3</u> could only solve 20% (122 out of 600)</li> </ul> <p>So what do we have now?</p> <table> <thead> <tr> <th style="text-align: left"> </th> <th style="text-align: center">Classical Planning</th> <th style="text-align: center">LLM Planning</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><strong>Open-world Planning</strong></td> <td style="text-align: center">❌</td> <td style="text-align: center">✅</td> </tr> <tr> <td style="text-align: left"><strong>Handling Abstract Tasks</strong></td> <td style="text-align: center">❌</td> <td style="text-align: center">✅</td> </tr> <tr> <td style="text-align: left"><strong>Handling Partial Observability</strong></td> <td style="text-align: center">❌</td> <td style="text-align: center">✅</td> </tr> <tr> <td style="text-align: left"><strong>Feasibility</strong></td> <td style="text-align: center">✅</td> <td style="text-align: center">❌</td> </tr> <tr> <td style="text-align: left"><strong>Optimality</strong></td> <td style="text-align: center">✅</td> <td style="text-align: center">❌</td> </tr> </tbody> </table> <p>LLMs are useful for planning. However, there are no formal guarantees.</p> <h3 id="can-we-improve-it-to-have-some-formal-guarantees">Can we improve it to have <u>some</u> formal guarantees?</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Yes
</code></pre></div></div> <h2 id="references">References</h2> <p><a id="1">[1]</a> Ding, Y. (2023). Integrating action knowledge and LLMs for Task Planning and situation handling in open worlds. Autonomous Robots, 47, 981-997.</p> <p><a id="2">[2]</a> Wang, G. (2024). Voyager: An Open-Ended Embodied Agent with Large Language Models. Transactions on Machine Learning Research, 2835-8856.</p> <p><a id="3">[3]</a> Huang, W. (2022). Language Models as Zero-Shot Planners: Extracting Actionable Knowledge for Embodied Agents. Proceedings of the 39th International Conference on Machine Learning, PMLR 162:9118-9147.</p> <p><a id="4">[4]</a> Vemprala, S. (2023). ChatGPT for Robotics: Design Principles and Model Abilities.</p> <p><a id="5">[5]</a> Sun, L. (2023). Interactive Planning Using Large Language Models for Partially Observable Robotics Tasks.</p> <p><a id="6">[6]</a> Hazra, R. (2023). SayCanPay: Heuristic Planning with Large Language Models Using Learnable Domain Knowledge. Proceedings of the AAAI Conference on Artificial Intelligence, 20123–20133.</p> <p><a id="7">[7]</a> Valmeekam, K. (2023). PlanBench: An Extensible Benchmark for Evaluating Large Language Models on Planning and Reasoning about Change. NeurIPS 2023 Track on Datasets and Benchmarks.</p> <p><a id="8">[8]</a> Kambhampati, S. (2023). On the Role of Large Language Models in Planning. ICAPS 2023 Tutorial</p> </div> </article> <br> <hr> <br> If you found this useful, please cite this as: <blockquote> <p>Hazra, Rishi (Apr 2024). LLMs as Planners?. https://rishihazra.github.io.</p> </blockquote> <p>or as a BibTeX entry:</p> <div class="language-bibtex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@article</span><span class="p">{</span><span class="nl">hazra2024llms-as-planners</span><span class="p">,</span>
  <span class="na">title</span>   <span class="p">=</span> <span class="s">{LLMs as Planners?}</span><span class="p">,</span>
  <span class="na">author</span>  <span class="p">=</span> <span class="s">{Hazra, Rishi}</span><span class="p">,</span>
  <span class="na">year</span>    <span class="p">=</span> <span class="s">{2024}</span><span class="p">,</span>
  <span class="na">month</span>   <span class="p">=</span> <span class="s">{Apr}</span><span class="p">,</span>
  <span class="na">url</span>     <span class="p">=</span> <span class="s">{https://rishihazra.github.io/sample-posts/2024/04/28/post-citation.html}</span>
<span class="p">}</span>
</code></pre></div></div> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/2022/04/23/displaying-external-posts-on-your-al-folio-blog.html">Displaying External Posts on Your al-folio Blog</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Rishi Hazra. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script> </script> </body> </html>